<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>OpenJudge - 1413:GIGA Universe Cup</title>

<link href="http://static.openjudge.cn/styles/global.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/styles.css?1470100812.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/group.css?1468143560.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/contest.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/favicon.ico?1467854438.ico" rel="shortcut icon" type="image/x-icon" />
<link href="http://static.openjudge.cn/styles/jquery.ui.theme.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.dialog.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.resizable.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.core.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<!--[if IE]>
   <script type="text/javascript" src="http://static.openjudge.cn/scripts/html5.js?1467854438.js"></script>
<![endif]-->
<!--[if lt IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie6-deprecated.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie7.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 8]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie8.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery-1.4.3.min.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery.form.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/base-nc.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/api.js?1467854438.js"></script>
<script type="text/javascript">
    //<![CDATA[
var web_root = '/',
	static_root = 'http://static.openjudge.cn/',
	script_root = 'http://static.openjudge.cn/scripts',
	style_root = 'http://static.openjudge.cn/styles';
    //]]>
</script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery-ui-1.8.11.custom.min.js?1467854438.js"></script></head>
<body>
	<div id="headerTop">
  <div class="wrapper">
    <h1 class="logo"><a href="http://openjudge.cn/" title="首页" rel="home">OpenJudge</a></h1>
    <ul id="userToolbar">
            <li><a class="link" href="/auth/login/">登入</a></li>
      <li><a class="link" href="/register/">注册</a></li>
          </ul>
    <div class="practice-search">
		 <form class="search-form" action="/search/" method="get">
	        <input name="q" type="text" value="题目ID, 标题, 描述" onclick="this.select()">
	        <button type="submit"></button>
	     </form>	
	</div>
    <div style="clear:both;"></div>
  </div>
</div>
	
	<div id="header">
  <div class="wrapper">
  	<div id="groupSmallLog">
  		<a href="http://qwsfsx.openjudge.cn/"><img class="group-logo" src="http://media.openjudge.cn/groups/130/logo_small.jpg" alt="趣味算法实习" width="50" height="50" /></a>    </div>
	<div class="contest-title-tab">
		 <h2><a href="http://qwsfsx.openjudge.cn/" title="首页" rel="home">趣味算法实习</a></h2>
		 <span>/</span>
		 <h2>Level 4</h2>
			</div>
    <ul id="mainNav">
        <li  class="current"><a href="/level4/" class="first">题目</a></li>
            <li ><a href="/level4/ranking/">排名</a></li>
                    <li ><a href="/level4/status/">状态</a></li>
	    			        <li class="last"><a href="/level4/clarify/" class="last">提问</a></li>
        </ul>	 
    <div style="clear:both;"></div>
  </div>
</div>	
	<div id="pagebody">
		<div class="wrapper">
			<script type="text/javascript">
$(function(e){
  var b={1:"很水",2:"简单",3:"普通",4:"较难",5:"变态"},
      g=$("#rate"),
      c=$("#stars img"),
      d=function(f){
        var h=0||g.val();
        c.each(function(k){
          var i=this.src.replace(/\w*\.gif$/,((k<f)?"sth":((k<h)?"st":"nst"))+".gif");
          this.src=i;
        });
        if(f)
          $("#rate_description").text(b[f]);
        else
          $("#rate_description").text(h!=0?b[h]:"");
      };
      c.hover(function(){d(this.id.charAt(4));},function(){d();});
      if(g.attr("value")){
        c.click(function(){
          var f=this.id.charAt(4);
          g.val(f);
          d(f);
          //$('#form_diffculity_rating').submit();
          $( "#dialog-form" ).dialog( "open" );
			g();
        });
      }
      d();
  });
$(document).ready(
		function(){
			$('#problem-tags').hide();
			$('#tag-display').toggle(function() {
											$('#problem-tags').show();
											this.value = '隐藏标签';
										}, function(){
											$('#problem-tags').hide();
											this.value = '显示标签';
										}
									);
			});
</script>

<div id="pageTitle"><h2>1413:GIGA Universe Cup</h2></div>
<div id="topMenu">
	<ul>
		<li class="current-show"><a href="/level4/1413/">查看</a></li>
		<li ><a href="/level4/1413/submit/">提交</a></li>
				<li ><a href="/level4/1413/statistics/">统计</a></li>
			
		<li ><a href="/level4/clarify/1413/">提问</a></li>
			
	</ul>
</div><div class="problem-page col-9">
	<dl class="problem-params">
		<dt>总时间限制: </dt>
		<dd>1000ms</dd>
			<dt>内存限制: </dt>
		<dd>65536kB</dd>
	</dl>
	<dl class="problem-content">
		<dt>描述</dt>
		<dd>Following FIFA World Cup, a larger competition called "GIGA Universe Cup" is taking place somewhere in our universe. Both FIFA World Cup and GIGA Universe Cup are two rounds competitions that consist of the first round, also known as "group league", and the second called "final tournament." In the first round, participating teams are divided into groups of four teams each. Each team in a group plays a match against each of the other teams in the same group. For example, let's say we have a group of the following four teams, "Engband, Swedon, Argontina, and Nigerua." They play the following six matches: Engband - Swedon, Engband - Argontina, Engband - Nigerua, Swedon - Argontina, Swedon - Nigerua, and Argontina - Nigerua.<br /><br />The result of a single match is shown by the number of goals scored by each team, like "Engband 1 - 0 Argontina," which says Engband scored one goal whereas Argontina zero. Based on the result of a match, points are given to the two teams as follows and used to rank teams. If a team wins a match (i.e., scores more goals than the other), three points are given to it and zero to the other. If a match draws (i.e., the two teams score the same number of goals), one point is given to each.<br /><br />The goal difference of a team in given matches is the total number of goals it scored minus the total number of goals its opponents scored in these matches. For example, if we have three matches "Swedon 1 - 2 Engband," "Swedon 3 - 4 Nigerua," and "Swedon 5 - 6 Argontina," then the goal difference of Swedon in these three matches is (1 + 3 + 5) - (2 + 4 + 6) = -3.<br /><br />Given the results of all the six matches in a group, teams are ranked by the following criteria, listed in the order of priority (that is, we first apply (a) to determine the ranking, with ties broken by (b), with ties broken by (c), and so on).<br /><br />(a) greater number of points in all the group matches,<br /><br />(b) greater goal difference in all the group matches,<br /><br />(c) greater number of goals scored in all the group matches.<br /><br />If two or more teams are equal on the basis of the above three criteria, their place shall be determined by the following criteria, applied in this order:<br /><br />(d) greater number of points obtained in the group matches between the teams concerned,<br /><br />(e) greater goal difference resulting from the group matches between the teams concerned,<br /><br />(f) greater number of goals scored in the group matches between the teams concerned,<br /><br />If two or more teams are still equal, apply (d), (e), and (f) as necessary to each such group. Repeat this until those three rules to equal teams do not make any further resolution. Finally, teams that still remain equal are ordered by :<br /><br />(g) drawing lots by the Organizing Committee for the GIGA Universe Cup.<br /><br />The two teams coming first and second in each group qualify for the second round.<br /><br />Your job is to write a program which, given the results of matches played so far in a group and one team specified in the group, calculates the probability that the specified team will qualify for the second round.<br /><br />You may assume each team has played exactly two matches and has one match to play. In total, four matches have been played and two matches are to be played.<br /><br />Assume the probability that any team scores (exactly) p goals in any match is:<br /><br />8!/(P!(8 - P)!)*(1/4)^p*(3/4)^(8-p) ,<br /><br />for p <= 8, and zero for p > 8. Assume the lot in the step (g) is fair.<br /></dd>
				
				
				<dt>输入</dt>
		<dd>The first line of the input is an integer, less than 1000, that indicates the number of subsequent records.<br /><br />The rest of the input is the indicated number of records. A single record has the following format:<br /><br />(empty) (-) (team)1 (-) (team)2 (-) (team)3 (-) (team)4<br /><br />(team)1 (-) (empty) (-) (m)12  (-) (m)13  (-) (m)14<br /><br />(team)2 (-) (empty) (-) (empty) (-) (m)23  (-) (m)24<br /><br />(team)3 (-) (empty) (-) (empty) (-) (empty) (-) (m)34<br /><br />(team)4 (-) (empty) (-) (empty) (-) (empty) (-) (empty)<br /><br />In the above, (-) is a single underscore (-) and (empty) a sequence of exactly four underscores (____). Each of (team)1,?,(team)4 is either an asterisk character (*) followed by exactly three uppercase letters (e.g., *ENG) , or an underscore followed by exactly three uppercase letters (e.g., _SWE). The former indicates that it is the team you are asked to calculate the probability of the second round qualification for. You may assume exactly one of (team)1,?, (team)4 is marked with an asterisk. Each (m)ij (1 <= i < j <= 4) is a match result between the (team)i and (team)j. Each match result is either __-_ (i.e., two underscores, hyphen, and another underscore) or of the form _x-y where each of x and y is a single digit (<= 8). The former indicates that the corresponding match has not been played, whereas the latter that the result of the match was x goals by (team)i and y goals by (team)j. Since each team has played exactly two matches, exactly two match results are in the former format.<br /></dd>
		<dt>输出</dt>
		<dd>The output should consist of n lines where n is the number of records in the input. The ith line should show the probability that the designated team (marked with an asterisk) will qualify for the second round in the ith record.<br /><br />Numbers should be printed with exactly seven digits after the decimal point. Each number should not contain an error greater than 10^(-7).<br /></dd>
		<dt>样例输入</dt>
		<dd><pre>5
_____*AAA__BBB__CCC__DDD
*AAA_______0-0__0-0___-_
_BBB_____________-___0-0
_CCC_________________0-0
_DDD____________________
______CHN__CRC__TUR_*BRA
_CHN_______0-2___-___0-4
_CRC____________1-1___-_
_TUR_________________1-2
*BRA____________________
______CMR_*KSA__GER__IRL
_CMR_______1-0___-___1-1
*KSA____________0-8___-_
_GER_________________1-1
_IRL____________________
______TUN__JPN_*BEL__RUS
_TUN________-___1-1__0-2
_JPN____________2-2__1-0
*BEL__________________-_
_RUS____________________
______MEX__CRO_*ECU__ITA
_MEX_______1-0__2-1___-_
_CRO_____________-___2-1
*ECU_________________0-2
_ITA____________________</pre></dd>
		<dt>样例输出</dt>
		<dd><pre>0.5000000
1.0000000
0.0000000
0.3852746
0.0353304</pre></dd>
						<dt>来源</dt>
		<dd>Japan 2002 Kanazawa</dd>
				</dl>
	<ul class="bottomMenu">
		<li class="current-show"><a href="/level4/1413/">查看</a></li>
		<li ><a href="/level4/1413/submit/">提交</a></li>
				<li ><a href="/level4/1413/statistics/">统计</a></li>
			
		<li ><a href="/level4/clarify/1413/">提问</a></li>
			</ul>
</div>

<div class="problem-statistics col-3">
       		<dl>
		<dt>全局题号</dt>
		<dd>415</dd>
					<dt>添加于</dt>
			<dd>2012-03-16</dd>
				<dt>提交次数</dt>
		<dd>0</dd>
		<dt>尝试人数</dt>
	    <dd>0</dd>
	    <dt>通过人数</dt>
	    <dd>0</dd>
	</dl>
		
		
					
	<script type="text/javascript">

$(function(){
    var e={},c={};//e为选中的标签
    var b=function(h){
        if(e[h]){
            c[h]=true;
            $.each(e[h],function(k,j){
                $(j).removeClass("gract").addClass("rdact")
                })
        }
    };//打标签css
    var d=function(h){
        if(e[h]){
            delete c[h];
            $.each(e[h],function(k,j){
                $(j).removeClass("rdact").addClass("gract")
                })
        }
    };//取消打上的标签css

    var g=function(){
        var h=$.trim($("#tags_title").attr("value").toLowerCase()).split(" "),i={};
        $.each(h,function(k,j){
            if(j!=""){
                b(j);
                i[j]=true
            }
        });
        for(t in c){
            if(!i[t]){
                d(t);
            }
        }
    };

    $('.tagbtn').each(function(j){
        var h=$(this).text().toLowerCase();
        if(e[h]){
            e[h].push(this);
        }
        else{
            e[h]=[this];
        }
    }).click(function(){
        var h=$(this).text();
        var k=$.trim($("#tags_title").attr("value")).split(" "),o=false,j=h.toLowerCase(),l;
        k=$.grep(k,function(value){
            if(value.toLowerCase()==j){
                d(j);
                o=true;
                return false;
            }
            else{
                return true;
            }
        });//遍历k检查k中是否存在所点击的标签如果有则去除
        if(!o){
            k.push(h);
            b(j);
        }//如果不存在则添加到最后
        var n=k.join(" ");//用空格连接数组中的标签
        $("#tags_title").attr("value",(n.length>1)?$.trim(n)+" ":n);
        $("#tags_title").focus(); //如果数量多于1个标签
    });
    $("#tags_title").keyup(g);

	// a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
	$( "#dialog:ui-dialog" ).dialog( "destroy" );
	
	$( "#dialog-form" ).dialog({
		autoOpen: false,
		height: 420,
		width: 550,
		modal: true,
		buttons: {
			"保存": function() {
				$('#rating_form').submit();
			},
			"取消": function() {
				$( this ).dialog( "close" );
			}
		},
		close: function() {
		}
	});

	$( "#create-rating" )
		.button()
		.click(function() {
			$( "#dialog-form" ).dialog( "open" );
			g();
		});
	
	 var x={1:"很水",2:"简单",3:"普通",4:"较难",5:"变态"},
     i=$("#rate"),
     y=$("#stars img"),
     z=function(f){
       var h=0||i.val();
       y.each(function(k){
         var i=this.src.replace(/\w*\.gif$/,((k<f)?"sth":((k<h)?"st":"nst"))+".gif");
         this.src=i;
       });
       if(f)
         $("#rate_description").text(x[f]);
       else
         $("#rate_description").text(h!=0?x[h]:"");
     };
     y.hover(function(){d(this.id.charAt(4));},function(){z();});
     if(i.attr("value")){
       y.click(function(){
         var f=this.id.charAt(4);
         i.val(f);
         z(f);
         //$('#form_diffculity_rating').submit();
         //$( "#dialog-form" ).dialog( "open" );
		//	g();
       });
     }
     z();
});
</script>

<div id="dialog-form" title="评价">
	<form id="rating_form" class="j a_interest_form" method="POST" action="/api/problem/rating" onsubmit="$(this).ajaxSubmit({dataType:'json',success:function(){$('#dialog-form').dialog( 'close' );}});return false;">
       			<input type="hidden" value="2531" name="app_id">
   				<input type="hidden" value="1413" name="problem_number">
   				<input type="hidden" value="415" name="problem_id">
       		<div class="rating">
	  您的评价
   		<span style="margin-left: 10px;" id="stars">
			<img alt="很水" src="http://static.openjudge.cn/images/nst.gif" id="star1">
			<img alt="简单" src="http://static.openjudge.cn/images/nst.gif" id="star2">
			<img alt="一般" src="http://static.openjudge.cn/images/nst.gif" id="star3">
			<img alt="较难" src="http://static.openjudge.cn/images/nst.gif" id="star4">
			<img alt="变态" src="http://static.openjudge.cn/images/nst.gif" id="star5">
		</span>
		<span class="pl" id="rate_description"></span>
   		
	    	<input type="hidden" value="" name="diffculity_rate" id="rate">         
		
    </div>
   				<ul class="interest_form " id="advtags">
    
        			<li>标签(多个标签用空格分隔): </li>
      				<li><input type="text" style="width: 250px;" name="tags" id="tags_title" value=""></li>
       				       				       				<li class="clearfix" id="populartags">
       					<dl>
       						<dt>常用标签:</dt>
       						<dd>
       						       							<span class="tagbtn gract">递归</span> &nbsp;
       						       							<span class="tagbtn gract">动态规划</span> &nbsp;
       						       							<span class="tagbtn gract">贪心</span> &nbsp;
       						       							<span class="tagbtn gract">搜索</span> &nbsp;
       						       							<span class="tagbtn gract">枚举</span> &nbsp;
       						       							<span class="tagbtn gract">模拟</span> &nbsp;
       						       							<span class="tagbtn gract">数学</span> &nbsp;
       						       							<span class="tagbtn gract">字符串处理</span> &nbsp;
       						       							<span class="tagbtn gract">几何</span> &nbsp;
       						       							<span class="tagbtn gract">高精度计算</span> &nbsp;
       						       							<span class="tagbtn gract">图论</span> &nbsp;
       						       						</dd>
       					</dl>
       				</li>
   				</ul>
	</form>
</div>
	
	<div>
						<h4>尚无评分</h4>
			</div>
	
		<input id="tag-display" type="button" value="显示标签" />
	<div id="problem-tags">
		<h4>已有的标签</h4>
				<span><a href="http://openjudge.cn/tag/?tag_name=%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86">字符串处理</a>(1)</span>
				<span><a href="http://openjudge.cn/tag/?tag_name=%E6%95%B0%E5%AD%A6">数学</a>(1)</span>
				<span><a href="http://openjudge.cn/tag/?tag_name=%E6%9E%9A%E4%B8%BE">枚举</a>(1)</span>
				<span><a href="http://openjudge.cn/tag/?tag_name=%E6%A8%A1%E6%8B%9F">模拟</a>(1)</span>
			</div>
		
				
						
	</div>
		</div>
	</div>
	<div id="footer">
	<div class="wrapper">
		<ul class="oj-info">
			<li>&copy;2002-2013 POJ 沪ICP备12005590号-3</li>
		</ul>
		<ul class="debug-info">
									<li>
				<a style="color:red" href="javascript:void(0);" onclick="api.switchLanguage('en_US');">English</a></li>
						<li><a href="http://openjudge.cn/help.html" rel="nofollow">帮助</a></li>
			<li><a href="http://openjudge.cn/about.html" rel="nofollow">关于</a></li>
		</ul>
		<div style="clear:both;"></div>
	</div>
</div>

	
	</body>
</html>
