<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>OpenJudge - 1594:Message Routing</title>

<link href="http://static.openjudge.cn/styles/global.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/styles.css?1470100812.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/group.css?1468143560.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/contest.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/favicon.ico?1467854438.ico" rel="shortcut icon" type="image/x-icon" />
<link href="http://static.openjudge.cn/styles/jquery.ui.theme.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.dialog.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.resizable.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.core.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<!--[if IE]>
   <script type="text/javascript" src="http://static.openjudge.cn/scripts/html5.js?1467854438.js"></script>
<![endif]-->
<!--[if lt IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie6-deprecated.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie7.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 8]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie8.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery-1.4.3.min.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery.form.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/base-nc.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/api.js?1467854438.js"></script>
<script type="text/javascript">
    //<![CDATA[
var web_root = '/',
	static_root = 'http://static.openjudge.cn/',
	script_root = 'http://static.openjudge.cn/scripts',
	style_root = 'http://static.openjudge.cn/styles';
    //]]>
</script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery-ui-1.8.11.custom.min.js?1467854438.js"></script></head>
<body>
	<div id="headerTop">
  <div class="wrapper">
    <h1 class="logo"><a href="http://openjudge.cn/" title="首页" rel="home">OpenJudge</a></h1>
    <ul id="userToolbar">
            <li><a class="link" href="/auth/login/">登入</a></li>
      <li><a class="link" href="/register/">注册</a></li>
          </ul>
    <div class="practice-search">
		 <form class="search-form" action="/search/" method="get">
	        <input name="q" type="text" value="题目ID, 标题, 描述" onclick="this.select()">
	        <button type="submit"></button>
	     </form>	
	</div>
    <div style="clear:both;"></div>
  </div>
</div>
	
	<div id="header">
  <div class="wrapper">
  	<div id="groupSmallLog">
  		<a href="http://qwsfsx.openjudge.cn/"><img class="group-logo" src="http://media.openjudge.cn/groups/130/logo_small.jpg" alt="趣味算法实习" width="50" height="50" /></a>    </div>
	<div class="contest-title-tab">
		 <h2><a href="http://qwsfsx.openjudge.cn/" title="首页" rel="home">趣味算法实习</a></h2>
		 <span>/</span>
		 <h2>Do not recommend</h2>
			</div>
    <ul id="mainNav">
        <li  class="current"><a href="/dontrecommand/" class="first">题目</a></li>
            <li ><a href="/dontrecommand/ranking/">排名</a></li>
                    <li ><a href="/dontrecommand/status/">状态</a></li>
	    			        <li class="last"><a href="/dontrecommand/clarify/" class="last">提问</a></li>
        </ul>	 
    <div style="clear:both;"></div>
  </div>
</div>	
	<div id="pagebody">
		<div class="wrapper">
			<script type="text/javascript">
$(function(e){
  var b={1:"很水",2:"简单",3:"普通",4:"较难",5:"变态"},
      g=$("#rate"),
      c=$("#stars img"),
      d=function(f){
        var h=0||g.val();
        c.each(function(k){
          var i=this.src.replace(/\w*\.gif$/,((k<f)?"sth":((k<h)?"st":"nst"))+".gif");
          this.src=i;
        });
        if(f)
          $("#rate_description").text(b[f]);
        else
          $("#rate_description").text(h!=0?b[h]:"");
      };
      c.hover(function(){d(this.id.charAt(4));},function(){d();});
      if(g.attr("value")){
        c.click(function(){
          var f=this.id.charAt(4);
          g.val(f);
          d(f);
          //$('#form_diffculity_rating').submit();
          $( "#dialog-form" ).dialog( "open" );
			g();
        });
      }
      d();
  });
$(document).ready(
		function(){
			$('#problem-tags').hide();
			$('#tag-display').toggle(function() {
											$('#problem-tags').show();
											this.value = '隐藏标签';
										}, function(){
											$('#problem-tags').hide();
											this.value = '显示标签';
										}
									);
			});
</script>

<div id="pageTitle"><h2>1594:Message Routing</h2></div>
<div id="topMenu">
	<ul>
		<li class="current-show"><a href="/dontrecommand/1594/">查看</a></li>
		<li ><a href="/dontrecommand/1594/submit/">提交</a></li>
				<li ><a href="/dontrecommand/1594/statistics/">统计</a></li>
			
		<li ><a href="/dontrecommand/clarify/1594/">提问</a></li>
			
	</ul>
</div><div class="problem-page col-9">
	<dl class="problem-params">
		<dt>总时间限制: </dt>
		<dd>1000ms</dd>
			<dt>内存限制: </dt>
		<dd>65536kB</dd>
	</dl>
	<dl class="problem-content">
		<dt>描述</dt>
		<dd>The International Standards Organization has defined a Message Handling System (MHS) called X.400. One of the functional units of a MHS, the MTA, handles routing of messages. Routing is performed based on components of the Originator/Recipient name. For the purposes of this problem, valid components of an O/R name (in order of widest scope to narrowest scope) are Country (C), Administrative Management Domain (ADMD), Private Management Domain (PRMD), and Organization Name (O). Each MTA uses its own routing table to forward messages on to the next MTA or delivering the message locally. <br />Your program is to simulate a collection of MTAs processing messages. Each time a message arrives (or is submitted) to an MTA, the MTA uses the O/R name of the message and the MTA's routing table to forward the message on to the appropriate MTA. If the MTA finds that the message's final destination is itself, it will deliver the message locally. Your program is to simulate this message-forwarding activity to trace the path of mail through the set of MTAs. <br /><br />The routing function is accomplished by comparing the supplied fields of entries in the routing table against the O/R name components of the message. Each routing table entry refers to exactly one MTA although MTAs may have multiple entries in the routing table. The first routing table entry (starting from the top) whose fields match the corresponding O/R name components in the message is selected and the message is forwarded to that MTA. It is possible for routing table entries to contain a wildcard (denoted by an asterisk); wildcard components always match the contents of the corresponding O/R name component in the message. <br /><br />MTAs are also responsible for routing error detection and recovery. If an MTA detects that it has received a message that it has handled before (a circular routing path is detected), it will place the message in the undeliverable queue and generate a non-delivery report. In addition, if an MTA is unable to route a message (ie no routing table entry match the message's O/R name), it will place the message in the undeliverable queue and generate a routing error report. <br /><br /></dd>
				
				
				<dt>输入</dt>
		<dd>Input to your program will consist of a series of message routing scenarios. Input for each scenario starts with a single line that contains a single integer (1 <= M <= 10) indicating the number of MTAs in the scenario. Subsequent lines will contain a description for each of the M MTAs. <br /><br />Each MTA description starts with a line containing the name of the MTA (a left justified alphabetic string of 1 to 10 characters with no embedded spaces) in columns 1-10 and an integer (0 <= I <= 9) in column 12 indicating the number of entries in the MTA's routing table. Each of the following I lines will then contain a valid name of an adjacent MTA in columns 1-10 followed by the Country, ADMD, PRMD, and Organization Name in columns 15-24, 30-39, 45-54, and 60-69 respectively. Each O/R name component will consist of 1 to 10 alphabetic characters left-justified in their field with no embedded blanks. Alternatively, an O/R name component may contain a single asterisk (*) in the first column in the field indicating a wild-card match in the field. <br /><br />Following the description of the MTAs, there will be a single line containg a single integer (0 < N < 32768) indicating the number of messages to be sent in the simulation. Each of the subsequent N lines will contain the description of exactly one message. Each message description contains a valid name of one of the MTAs described above left-justified in columns 1-10 followed by the Country, ADMD, PRMD, and Organization Name in columns 15-24, 30-39, 45-54, and 60-69 respectively. Each O/R name component will consist of 1 to 10 alphabetic characters left-justified in their field with no embedded blanks and the MTA name is where the message is submitted and the simulation begins. <br /><br /></dd>
		<dt>输出</dt>
		<dd>For each scenario, you are to print ``Scenario # X" where X is the number of the scenario starting with 1 and incrementing for subsequent scenarios. Each of the following N lines will contain the number of the message left-justified in column 1 immediately followed by one of the following messages: <br /><br />`` -- delivered to MTA_NAME", `` -- circular routing detected by MTA_NAME", or <br /><br />`` -- unable to route at MTA_NAME". <br /><br />In all three messages, MTA_NAME is replaced by the name of the MTA generating the report. Other than MTA_NAME, you are to print the string exactly as above including spacing and dashes. After the list of message reports, you are to print a single blank line and continue processing with the next scenario. <br /><br /></dd>
		<dt>样例输入</dt>
		<dd><pre>5 
NAULINS    3 
HOUSTON       US            SHIP            *              UHDOWNTOWN 
NAULINS       US            SHIP            *              UNO 
DALLAS        US            AIR             UT             * 
HOUSTON    4 
HOUSTON       US            *               UH             UHDT 
SANANTONIO    US            BUS             UT             UTSA 
DALLAS        US            AIR             UT             * 
NAULINS       US            SHIP            *              UNO 
DALLAS     7 
DALLAS        US            *               UT             UTD 
DALLAS        US            *               UT             UTA 
HOUSTON       US            *               UH             * 
SANANTONIO    US            AIR             UT             UTSA 
OKLAHOMA      US            BUS             *              OU 
NAULINS       US            AIR             *              UNO 
HOUSTON       US            SHIP            *              * 
OKLAHOMA   3 
OKLAHOMA      US            *               *              OU 
DALLAS        US            AIR             *              * 
SANANTONIO    US            BUS             *              * 
SANANTONIO 5 
HOUSTON       *             *               *              UNO 
HOUSTON       US            BUS             UH             * 
DALLAS        US            AIR             *              * 
SANANTONIO    US            *               UT             UTSA 
OKLAHOMA      US            BUS             *              * 
5 
SANANTONIO    US            AIR             COLLEGE        UNO 
OKLAHOMA      US            BUS             UH             UHDT 
DALLAS        US            SHIP            COLLEGE        UNO 
NAULINS       US            AIR             COLLEGE        OU 
HOUSTON       US            AIR             UT             UTSA</pre></dd>
		<dt>样例输出</dt>
		<dd><pre>Scenario # 1 
1 -- unable to route at HOUSTON 
2 -- delivered to HOUSTON 
3 -- delivered to NAULINS 
4 -- unable to route at NAULINS 
5 -- circular routing detected by DALLAS</pre></dd>
						<dt>来源</dt>
		<dd>South Central USA 1995</dd>
				</dl>
	<ul class="bottomMenu">
		<li class="current-show"><a href="/dontrecommand/1594/">查看</a></li>
		<li ><a href="/dontrecommand/1594/submit/">提交</a></li>
				<li ><a href="/dontrecommand/1594/statistics/">统计</a></li>
			
		<li ><a href="/dontrecommand/clarify/1594/">提问</a></li>
			</ul>
</div>

<div class="problem-statistics col-3">
       		<dl>
		<dt>全局题号</dt>
		<dd>596</dd>
					<dt>添加于</dt>
			<dd>2012-08-25</dd>
				<dt>提交次数</dt>
		<dd>0</dd>
		<dt>尝试人数</dt>
	    <dd>0</dd>
	    <dt>通过人数</dt>
	    <dd>0</dd>
	</dl>
		
		
					
	<script type="text/javascript">

$(function(){
    var e={},c={};//e为选中的标签
    var b=function(h){
        if(e[h]){
            c[h]=true;
            $.each(e[h],function(k,j){
                $(j).removeClass("gract").addClass("rdact")
                })
        }
    };//打标签css
    var d=function(h){
        if(e[h]){
            delete c[h];
            $.each(e[h],function(k,j){
                $(j).removeClass("rdact").addClass("gract")
                })
        }
    };//取消打上的标签css

    var g=function(){
        var h=$.trim($("#tags_title").attr("value").toLowerCase()).split(" "),i={};
        $.each(h,function(k,j){
            if(j!=""){
                b(j);
                i[j]=true
            }
        });
        for(t in c){
            if(!i[t]){
                d(t);
            }
        }
    };

    $('.tagbtn').each(function(j){
        var h=$(this).text().toLowerCase();
        if(e[h]){
            e[h].push(this);
        }
        else{
            e[h]=[this];
        }
    }).click(function(){
        var h=$(this).text();
        var k=$.trim($("#tags_title").attr("value")).split(" "),o=false,j=h.toLowerCase(),l;
        k=$.grep(k,function(value){
            if(value.toLowerCase()==j){
                d(j);
                o=true;
                return false;
            }
            else{
                return true;
            }
        });//遍历k检查k中是否存在所点击的标签如果有则去除
        if(!o){
            k.push(h);
            b(j);
        }//如果不存在则添加到最后
        var n=k.join(" ");//用空格连接数组中的标签
        $("#tags_title").attr("value",(n.length>1)?$.trim(n)+" ":n);
        $("#tags_title").focus(); //如果数量多于1个标签
    });
    $("#tags_title").keyup(g);

	// a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
	$( "#dialog:ui-dialog" ).dialog( "destroy" );
	
	$( "#dialog-form" ).dialog({
		autoOpen: false,
		height: 420,
		width: 550,
		modal: true,
		buttons: {
			"保存": function() {
				$('#rating_form').submit();
			},
			"取消": function() {
				$( this ).dialog( "close" );
			}
		},
		close: function() {
		}
	});

	$( "#create-rating" )
		.button()
		.click(function() {
			$( "#dialog-form" ).dialog( "open" );
			g();
		});
	
	 var x={1:"很水",2:"简单",3:"普通",4:"较难",5:"变态"},
     i=$("#rate"),
     y=$("#stars img"),
     z=function(f){
       var h=0||i.val();
       y.each(function(k){
         var i=this.src.replace(/\w*\.gif$/,((k<f)?"sth":((k<h)?"st":"nst"))+".gif");
         this.src=i;
       });
       if(f)
         $("#rate_description").text(x[f]);
       else
         $("#rate_description").text(h!=0?x[h]:"");
     };
     y.hover(function(){d(this.id.charAt(4));},function(){z();});
     if(i.attr("value")){
       y.click(function(){
         var f=this.id.charAt(4);
         i.val(f);
         z(f);
         //$('#form_diffculity_rating').submit();
         //$( "#dialog-form" ).dialog( "open" );
		//	g();
       });
     }
     z();
});
</script>

<div id="dialog-form" title="评价">
	<form id="rating_form" class="j a_interest_form" method="POST" action="/api/problem/rating" onsubmit="$(this).ajaxSubmit({dataType:'json',success:function(){$('#dialog-form').dialog( 'close' );}});return false;">
       			<input type="hidden" value="2533" name="app_id">
   				<input type="hidden" value="1594" name="problem_number">
   				<input type="hidden" value="596" name="problem_id">
       		<div class="rating">
	  您的评价
   		<span style="margin-left: 10px;" id="stars">
			<img alt="很水" src="http://static.openjudge.cn/images/nst.gif" id="star1">
			<img alt="简单" src="http://static.openjudge.cn/images/nst.gif" id="star2">
			<img alt="一般" src="http://static.openjudge.cn/images/nst.gif" id="star3">
			<img alt="较难" src="http://static.openjudge.cn/images/nst.gif" id="star4">
			<img alt="变态" src="http://static.openjudge.cn/images/nst.gif" id="star5">
		</span>
		<span class="pl" id="rate_description"></span>
   		
	    	<input type="hidden" value="" name="diffculity_rate" id="rate">         
		
    </div>
   				<ul class="interest_form " id="advtags">
    
        			<li>标签(多个标签用空格分隔): </li>
      				<li><input type="text" style="width: 250px;" name="tags" id="tags_title" value=""></li>
       				       				       				<li class="clearfix" id="populartags">
       					<dl>
       						<dt>常用标签:</dt>
       						<dd>
       						       							<span class="tagbtn gract">递归</span> &nbsp;
       						       							<span class="tagbtn gract">动态规划</span> &nbsp;
       						       							<span class="tagbtn gract">贪心</span> &nbsp;
       						       							<span class="tagbtn gract">搜索</span> &nbsp;
       						       							<span class="tagbtn gract">枚举</span> &nbsp;
       						       							<span class="tagbtn gract">模拟</span> &nbsp;
       						       							<span class="tagbtn gract">数学</span> &nbsp;
       						       							<span class="tagbtn gract">字符串处理</span> &nbsp;
       						       							<span class="tagbtn gract">几何</span> &nbsp;
       						       							<span class="tagbtn gract">高精度计算</span> &nbsp;
       						       							<span class="tagbtn gract">图论</span> &nbsp;
       						       						</dd>
       					</dl>
       				</li>
   				</ul>
	</form>
</div>
	
	<div>
						<h4>尚无评分</h4>
			</div>
	
		
				
						
	</div>
		</div>
	</div>
	<div id="footer">
	<div class="wrapper">
		<ul class="oj-info">
			<li>&copy;2002-2013 POJ 沪ICP备12005590号-3</li>
		</ul>
		<ul class="debug-info">
									<li>
				<a style="color:red" href="javascript:void(0);" onclick="api.switchLanguage('en_US');">English</a></li>
						<li><a href="http://openjudge.cn/help.html" rel="nofollow">帮助</a></li>
			<li><a href="http://openjudge.cn/about.html" rel="nofollow">关于</a></li>
		</ul>
		<div style="clear:both;"></div>
	</div>
</div>

	
	</body>
</html>
