<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>OpenJudge - 4052:Microblog Subscription</title>

<link href="http://static.openjudge.cn/styles/global.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/styles.css?1470100812.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/group.css?1468143560.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/contest.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/favicon.ico?1467854438.ico" rel="shortcut icon" type="image/x-icon" />
<!--[if IE]>
   <script type="text/javascript" src="http://static.openjudge.cn/scripts/html5.js?1467854438.js"></script>
<![endif]-->
<!--[if lt IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie6-deprecated.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie7.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 8]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie8.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery-1.4.3.min.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery.form.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/base-nc.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/api.js?1467854438.js"></script>
<script type="text/javascript">
    //<![CDATA[
var web_root = '/',
	static_root = 'http://static.openjudge.cn/',
	script_root = 'http://static.openjudge.cn/scripts',
	style_root = 'http://static.openjudge.cn/styles';
    //]]>
</script></head>
<body>
	<div id="headerTop">
  <div class="wrapper">
    <h1 class="logo"><a href="http://openjudge.cn/" title="首页" rel="home">OpenJudge</a></h1>
    <ul id="userToolbar">
            <li><a class="link" href="/auth/login/">登入</a></li>
      <li><a class="link" href="/register/">注册</a></li>
          </ul>
    <div class="practice-search">
		 <form class="search-form" action="/search/" method="get">
	        <input name="q" type="text" value="题目ID, 标题, 描述" onclick="this.select()">
	        <button type="submit"></button>
	     </form>	
	</div>
    <div style="clear:both;"></div>
  </div>
</div>
	
	<div id="header">
  <div class="wrapper">
  	<div id="groupSmallLog">
  		<a href="http://pkuteam.openjudge.cn/"><img class="group-logo" src="http://media.openjudge.cn/groups/7/logo_small.jpg" alt="北京大学ACM-ICPC竞赛队" width="50" height="50" /></a>    </div>
	<div class="contest-title-tab">
		 <h2><a href="http://pkuteam.openjudge.cn/" title="首页" rel="home">北京大学ACM-ICPC竞赛队</a></h2>
		 <span>/</span>
		 <h2>ICPC竞技编程练习</h2>
			</div>
    <ul id="mainNav">
        <li  class="current"><a href="/icpc/" class="first">题目</a></li>
            <li ><a href="/icpc/ranking/">排名</a></li>
                    <li ><a href="/icpc/status/">状态</a></li>
	    			        <li class="last"><a href="/icpc/clarify/" class="last">提问</a></li>
        </ul>	 
    <div style="clear:both;"></div>
  </div>
</div>	
	<div id="pagebody">
		<div class="wrapper">
			<script type="text/javascript">
$(function(e){
  var b={1:"很水",2:"简单",3:"普通",4:"较难",5:"变态"},
      g=$("#rate"),
      c=$("#stars img"),
      d=function(f){
        var h=0||g.val();
        c.each(function(k){
          var i=this.src.replace(/\w*\.gif$/,((k<f)?"sth":((k<h)?"st":"nst"))+".gif");
          this.src=i;
        });
        if(f)
          $("#rate_description").text(b[f]);
        else
          $("#rate_description").text(h!=0?b[h]:"");
      };
      c.hover(function(){d(this.id.charAt(4));},function(){d();});
      if(g.attr("value")){
        c.click(function(){
          var f=this.id.charAt(4);
          g.val(f);
          d(f);
          //$('#form_diffculity_rating').submit();
          $( "#dialog-form" ).dialog( "open" );
			g();
        });
      }
      d();
  });
$(document).ready(
		function(){
			$('#problem-tags').hide();
			$('#tag-display').toggle(function() {
											$('#problem-tags').show();
											this.value = '隐藏标签';
										}, function(){
											$('#problem-tags').hide();
											this.value = '显示标签';
										}
									);
			});
</script>

<div id="pageTitle"><h2>4052:Microblog Subscription</h2></div>
<div id="topMenu">
	<ul>
		<li class="current-show"><a href="/icpc/4052/">查看</a></li>
		<li ><a href="/icpc/4052/submit/">提交</a></li>
				<li ><a href="/icpc/4052/statistics/">统计</a></li>
			
		<li ><a href="/icpc/clarify/4052/">提问</a></li>
			
	</ul>
</div><div class="problem-page col-9">
	<dl class="problem-params">
		<dt>总时间限制: </dt>
		<dd>4000ms</dd>
			<dt>内存限制: </dt>
		<dd>262144kB</dd>
	</dl>
	<dl class="problem-content">
		<dt>描述</dt>
		<dd><p>Jia Baoyu was the best programmer in his big family—the Family of Jia, which is why he was regarded as the most charming gentleman among girls. Recently he was designing a new microblog to target the requirements of sharing information in his family. In his system, a microblog can be regarded as a document contains no more than 2000 words.<br /></p><p>By asked to other member&#39;s in the Family of Jia, he decided to release a function of &quot;subscription&quot; in his microblog. Let&#39;s describe this function more specifically:<br /></p><p>A user can submit a query to describe subscription requirement. A query contains a match type, a match distance constraint and a set of not more than 5 English words. After the user submitted the query, he/she will receive all the new microblog that satisfies the query in his/her &quot;Feeds stream&quot;. If a microblog satisfies a query, it should match all the words in the query. And a microblog matches a word X when there is at least a word in microblog that matches the word X. Note that the match constraint is applied independently for each word in the query.<br /></p><p>There are three types of word matching: exact match, approximate match under a Hamming distance constraint&nbsp;&nbsp;and approximate match under an edit distance. The definitions of these three matches is are follows:<br /></p><p style="text-indent: 2em;">Exact match: two words are exactly the same;</p><p style="text-indent: 2em;">Approximate match under Hamming distance D constraint: two words with the same length have at most D positions at which corresponding letters are different.</p><p style="text-indent: 2em;">Approximate match under edit distance D constraint: one word can be changed into the other word in at most D single-letter edits, including insertion, deletion and substitution.</p><p>For example, Lin Daiyu submitted a query: edit distance match with distance 1, and the word set &quot;flower poem tear&quot;. Then she will receive the microblog &quot;I wrote a pom full of tears after I saw Daiyu buried the flowers&quot;. In this case, &quot;flower&quot; can be matched with &quot;flowers&quot; in 1 edit distance, &quot;tear&quot; can be matched with &quot;tears&quot; and &quot;poem&quot; can be matched with &quot;pom&quot; (obviously it was a typo).<br /></p><p>After a user submitted a query, he/she could delete the query in anytime. After that he/she would not receive microblogs that satisfy this query.<br /></p><p>Now please help Jia Baoyu to accomplish this function.<br /></p></dd>
				
				
				<dt>输入</dt>
		<dd>The first line of input file contains an integer representing the following number of lines.<br />Each of the following line has three formats:<br /><br /><strong>s [id] [type] [dist] [k] [word_1] [word_2] … [word_k]</strong><br />The line that starts with lowercase 's' means adding a query into system. [id] is an integer between 1 to 1000 representing the id of the query. [type] is an integer between 0 to 2 representing the match type (0 means exact match, 1 means hamming distance match and 2 means edit distance match). [dist] is an integer representing the distance constraint (Note that the distance is always 0 for exact match). This distance constraint is at most 2. [k] means the number of following words (0 < k <= 5). [word_i] represents a word in this query. All the items are separated by a space.<br /><br /><strong>e [id]</strong><br /><br />The line that starts with lowercase 'e' means deleting a query from system. [id] is the id of that query. We guarantee that the id always exist and has not deleted before.<br /><br /><strong>m [id] [k] [word_1] [word_2] … [word_k]</strong><br /><br />The line that starts with lowercase 'm' means a microblog. [id] is an integer between 1 to 100 which means the id of the microblog. [k] is an integer meaning the number of words that follows (0 < k <= 2000). [word_i] represents a word in this microblog. All the items are separated by a space.<br />The length of a word is less than or equal to 30, and there are no blanks in a word. The number of total queries is less than or equal to 1000, while the number of total microblogs is less than or equal to 100.</dd>
		<dt>输出</dt>
		<dd>For each microblog in the input file, output all the matched active queries when it published. The “active” means that query has been submitted and not deleted yet. The format is:<br /><br /><strong>[id] [k] [q_1] [q_2] … [q_k]</strong><br /><br />[id] means the id of this microblog. [k] means the number of queries that it satisfies. [q_i] means a query id. Query ids must be sorted increasingly.<br />The order of microblog in output file must be the same as it is displayed in the input file.</dd>
		<dt>样例输入</dt>
		<dd><pre>6
s 1 1 2 1 bkple
m 2 1 apple
s 2 0 0 2 apple banana
m 1 2 apple banana
e 1
m 3 2 apple banana
</pre></dd>
		<dt>样例输出</dt>
		<dd><pre>2 1 1
1 2 1 2
3 1 2
</pre></dd>
						</dl>
	<ul class="bottomMenu">
		<li class="current-show"><a href="/icpc/4052/">查看</a></li>
		<li ><a href="/icpc/4052/submit/">提交</a></li>
				<li ><a href="/icpc/4052/statistics/">统计</a></li>
			
		<li ><a href="/icpc/clarify/4052/">提问</a></li>
			</ul>
</div>

<div class="problem-statistics col-3">
       		<dl>
		<dt>全局题号</dt>
		<dd>6056</dd>
					<dt>添加于</dt>
			<dd>2017-07-26</dd>
				<dt>提交次数</dt>
		<dd>0</dd>
		<dt>尝试人数</dt>
	    <dd>0</dd>
	    <dt>通过人数</dt>
	    <dd>0</dd>
	</dl>
		
		
					
	</div>
		</div>
	</div>
	<div id="footer">
	<div class="wrapper">
		<ul class="oj-info">
			<li>&copy;2002-2013 POJ 沪ICP备12005590号-3</li>
		</ul>
		<ul class="debug-info">
									<li>
				<a style="color:red" href="javascript:void(0);" onclick="api.switchLanguage('en_US');">English</a></li>
						<li><a href="http://openjudge.cn/help.html" rel="nofollow">帮助</a></li>
			<li><a href="http://openjudge.cn/about.html" rel="nofollow">关于</a></li>
		</ul>
		<div style="clear:both;"></div>
	</div>
</div>

	
	</body>
</html>
