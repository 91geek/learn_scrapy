<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>OpenJudge - K:Up a Tree</title>

<link href="http://static.openjudge.cn/styles/global.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/styles.css?1470100812.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/group.css?1468143560.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/contest.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/favicon.ico?1467854438.ico" rel="shortcut icon" type="image/x-icon" />
<!--[if IE]>
   <script type="text/javascript" src="http://static.openjudge.cn/scripts/html5.js?1467854438.js"></script>
<![endif]-->
<!--[if lt IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie6-deprecated.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie7.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 8]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie8.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery-1.4.3.min.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery.form.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/base-nc.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/api.js?1467854438.js"></script>
<script type="text/javascript">
    //<![CDATA[
var web_root = '/',
	static_root = 'http://static.openjudge.cn/',
	script_root = 'http://static.openjudge.cn/scripts',
	style_root = 'http://static.openjudge.cn/styles';
    //]]>
</script></head>
<body>
	<div id="headerTop">
  <div class="wrapper">
    <h1 class="logo"><a href="http://openjudge.cn/" title="首页" rel="home">OpenJudge</a></h1>
    <ul id="userToolbar">
            <li><a class="link" href="/auth/login/">登入</a></li>
      <li><a class="link" href="/register/">注册</a></li>
          </ul>
    <div class="practice-search">
		 <form class="search-form" action="/search/" method="get">
	        <input name="q" type="text" value="题目ID, 标题, 描述" onclick="this.select()">
	        <button type="submit"></button>
	     </form>	
	</div>
    <div style="clear:both;"></div>
  </div>
</div>
	
	<div id="header">
  <div class="wrapper">
  	<div id="groupSmallLog">
  		<a href="http://pkuteam.openjudge.cn/"><img class="group-logo" src="http://media.openjudge.cn/groups/7/logo_small.jpg" alt="北京大学ACM-ICPC竞赛队" width="50" height="50" /></a>    </div>
	<div class="contest-title-tab">
		 <h2><a href="http://pkuteam.openjudge.cn/" title="首页" rel="home">北京大学ACM-ICPC竞赛队</a></h2>
		 <span>/</span>
		 <h2>2017萧山第3场</h2>
		<span style="font-size:14px;">已经结束</span>	</div>
    <ul id="mainNav">
        <li  class="current"><a href="/2017xiaoshan03/" class="first">题目</a></li>
            <li ><a href="/2017xiaoshan03/ranking/">排名</a></li>
                    <li ><a href="/2017xiaoshan03/status/">状态</a></li>
	     
        <li ><a href="/2017xiaoshan03/statistics/">统计</a></li>
				        <li class="last"><a href="/2017xiaoshan03/clarify/" class="last">提问</a></li>
        </ul>	 
    <div style="clear:both;"></div>
  </div>
</div>	
	<div id="pagebody">
		<div class="wrapper">
			<script type="text/javascript">
$(function(e){
  var b={1:"很水",2:"简单",3:"普通",4:"较难",5:"变态"},
      g=$("#rate"),
      c=$("#stars img"),
      d=function(f){
        var h=0||g.val();
        c.each(function(k){
          var i=this.src.replace(/\w*\.gif$/,((k<f)?"sth":((k<h)?"st":"nst"))+".gif");
          this.src=i;
        });
        if(f)
          $("#rate_description").text(b[f]);
        else
          $("#rate_description").text(h!=0?b[h]:"");
      };
      c.hover(function(){d(this.id.charAt(4));},function(){d();});
      if(g.attr("value")){
        c.click(function(){
          var f=this.id.charAt(4);
          g.val(f);
          d(f);
          //$('#form_diffculity_rating').submit();
          $( "#dialog-form" ).dialog( "open" );
			g();
        });
      }
      d();
  });
$(document).ready(
		function(){
			$('#problem-tags').hide();
			$('#tag-display').toggle(function() {
											$('#problem-tags').show();
											this.value = '隐藏标签';
										}, function(){
											$('#problem-tags').hide();
											this.value = '显示标签';
										}
									);
			});
</script>

<div id="pageTitle"><h2>K:Up a Tree</h2></div>
<div id="topMenu">
	<ul>
		<li class="current-show"><a href="/2017xiaoshan03/K/">查看</a></li>
		<li ><a href="/2017xiaoshan03/K/submit/">提交</a></li>
				<li ><a href="/2017xiaoshan03/K/statistics/">统计</a></li>
			
		<li ><a href="/2017xiaoshan03/clarify/K/">提问</a></li>
			
	</ul>
</div><div class="problem-page col-9">
	<dl class="problem-params">
		<dt>总时间限制: </dt>
		<dd>60000ms</dd>
			<dt>单个测试点时间限制: </dt>
		<dd>6000ms</dd>
			<dt>内存限制: </dt>
		<dd>262144kB</dd>
	</dl>
	<dl class="problem-content">
		<dt>描述</dt>
		<dd><p>Anatoly Cheng McDougal is a typical student in many ways. Whenever possible he tries to cut and paste code instead of writing it from scratch. Unavoidably this approach causes him problems. For example, when he first learned about preorder, inorder and postorder traversals of trees, and was given code for a preorder print of a tree (shown on the left below), he simply cut and pasted the code, then moved the print statement to the correct location and renamed the procedure. However, he forgot to rename the procedure calls inside the code, resulting in the defective inorder print and postorder print code shown below.</p><p><img width="100%" src="http://media.openjudge.cn/images/upload/1502237303.png" /></p><p>At this point, Anatoly did not behave like a typical student. He actually tested his code! Unfortunately, when the results were not correct, he reverted back to typical student behavior. He panicked and started randomly changing calls in all three procedures, hoping to get things right. Needless to say, the situation became even worse now than when he started.</p><p>Anatoly’s professor tested the code on a random tree of characters. When she looked at the output of his three print routines, she correctly guessed what had happened. However, instead of going directly to his code, she decided to try to reconstruct Anatoly’s code just by observing the output. In order to do this, she correctly made the following assumptions:</p><p>　1.　The output statement in each print routine is in the correct location (for example, between the two recursive calls in the <span style="font-family:monospace">inPrint</span> routine).<br />　2.　Among the six recursive calls made by the three routines, exactly two calls are to <span style="font-family:monospace">prePrint</span>, exactly two are to <span style="font-family:monospace">inPrint</span>, and exactly two are to <span style="font-family:monospace">postPrint</span>, though potentially in the wrong routines.</p><p>Soon the professor realized that reconstructing Anatoly’s code and the test tree from his output was not a simple task and that the result might be ambiguous. You will have to help her find all possible reconstructions of Anatoly’s code. In addition, for each such reconstruction, you are to find the alphabetically first tree (as described in the output section) giving the observed output.</p></dd>
				
				
				<dt>输入</dt>
		<dd>The input consists of a single test case. A test case consists of three strings on three separate lines: the observed output of Anatoly's <span style="font-family:monospace;">prePrint</span>, <span style="font-family:monospace;">inPrint</span> and <span style="font-family:monospace;">postPrint</span> routines (in that order) on some test tree. Each of these strings consists of n uppercase letters (4 ≤ n ≤ 26), with no repeated letters in any string. The test case is guaranteed to have at least one solution.</dd>
		<dt>输出</dt>
		<dd>Display all possible reconstructions for the test case, ordered as described in the last paragraph below. The output for each reconstruction consists of two parts. The first part is a single line and describes the six calls in Anatoly's routines: first the two (recursive) calls in Anatoly's <span style="font-family:monospace;">prePrint</span> routine, followed by the calls in his <span style="font-family:monospace;">inPrint</span> routine, and finally the calls in his <span style="font-family:monospace;">postPrint</span> routine. The calls are described by the words <span style="font-family:monospace;">Pre</span>, <span style="font-family:monospace;">In</span>, and <span style="font-family:monospace;">Post</span>, separated by spaces. For example, if Anatoly's routines were correct, the resulting output of the first part of the reconstruction would be <span style="font-family:monospace;">Pre Pre In In Post Post</span>.<br /><br />The second part consists of three lines and describes the first test tree that could have generated the observed outputs. The first line is the <em>correct</em> preorder print of the tree, and the second and third lines contain the correct inorder and postorder prints, respectively. The first tree is the one with the alphabetically first preorder print. If there are multiple such trees, the first of these is the one with the alphabetically first inorder print.<br /><br />Every reconstruction is a sequence of 6 tokens chosen from <span style="font-family:monospace;">Pre</span>, <span style="font-family:monospace;">In</span>, and <span style="font-family:monospace;">Post</span>. The ordering of reconstructions is lexicographic with respect to the following ordering of tokens: <span style="font-family:monospace;">Pre < In < Post</span>.</dd>
		<dt>样例输入</dt>
		<dd><pre>HFBIGEDCJA
BIGEDCJFAH
BIGEDCJFAH</pre></dd>
		<dt>样例输出</dt>
		<dd><pre>Pre Post In Post In Pre
HFBJCDEGIA
BIGEDCJFAH
IGEDCJBAFH</pre></dd>

<dt>Sample Input #2</dt>
<dd><pre>BNLFAGHPEDOCMJIK
NLBGAPHCODEIJMKF
NLFAGHPEDOCMJIKB</pre></dd>

<dt>Sample Output #2</dt>
<dd><pre>In Pre In Post Post Pre
BLNFKMEHAGPCODIJ
NLBAGHPEODCMIJKF
NLGAPHDOCEJIMKFB

Post Pre In In Post Pre
BLNFKICPGAHEODMJ
NLBGAPHCODEIJMKF
NLAGHPDOECJMIKFB</pre></dd>
						<dt>来源</dt>
		<dd>ACM-ICPC World Finals 2013</dd>
				</dl>
	<ul class="bottomMenu">
		<li class="current-show"><a href="/2017xiaoshan03/K/">查看</a></li>
		<li ><a href="/2017xiaoshan03/K/submit/">提交</a></li>
				<li ><a href="/2017xiaoshan03/K/statistics/">统计</a></li>
			
		<li ><a href="/2017xiaoshan03/clarify/K/">提问</a></li>
			</ul>
</div>

<div class="problem-statistics col-3">
       	<p class="notification">H题样例输出1更正为Impossible</p>
			<dl>
		<dt>全局题号</dt>
		<dd>15812</dd>
				<dt>提交次数</dt>
		<dd>0</dd>
		<dt>尝试人数</dt>
	    <dd>0</dd>
	    <dt>通过人数</dt>
	    <dd>0</dd>
	</dl>
		
		
					
	</div>
		</div>
	</div>
	<div id="footer">
	<div class="wrapper">
		<ul class="oj-info">
			<li>&copy;2002-2013 POJ 沪ICP备12005590号-3</li>
		</ul>
		<ul class="debug-info">
									<li>
				<a style="color:red" href="javascript:void(0);" onclick="api.switchLanguage('en_US');">English</a></li>
						<li><a href="http://openjudge.cn/help.html" rel="nofollow">帮助</a></li>
			<li><a href="http://openjudge.cn/about.html" rel="nofollow">关于</a></li>
		</ul>
		<div style="clear:both;"></div>
	</div>
</div>

	
	</body>
</html>
