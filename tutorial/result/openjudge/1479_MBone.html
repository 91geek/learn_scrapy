<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>OpenJudge - 1479:MBone</title>

<link href="http://static.openjudge.cn/styles/global.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/styles.css?1470100812.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/group.css?1468143560.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/contest.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/favicon.ico?1467854438.ico" rel="shortcut icon" type="image/x-icon" />
<link href="http://static.openjudge.cn/styles/jquery.ui.theme.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.dialog.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.resizable.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<link href="http://static.openjudge.cn/styles/jquery.ui.core.css?1467854438.css" media="screen" rel="stylesheet" type="text/css" />
<!--[if IE]>
   <script type="text/javascript" src="http://static.openjudge.cn/scripts/html5.js?1467854438.js"></script>
<![endif]-->
<!--[if lt IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie6-deprecated.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 7]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie7.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<!--[if IE 8]>
	<link type="text/css" href="http://static.openjudge.cn/styles/ie8.css?1467854438.css" rel="stylesheet" />
<![endif]-->
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery-1.4.3.min.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery.form.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/base-nc.js?1467854438.js"></script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/api.js?1467854438.js"></script>
<script type="text/javascript">
    //<![CDATA[
var web_root = '/',
	static_root = 'http://static.openjudge.cn/',
	script_root = 'http://static.openjudge.cn/scripts',
	style_root = 'http://static.openjudge.cn/styles';
    //]]>
</script>
<script type="text/javascript" src="http://static.openjudge.cn/scripts/jquery-ui-1.8.11.custom.min.js?1467854438.js"></script></head>
<body>
	<div id="headerTop">
  <div class="wrapper">
    <h1 class="logo"><a href="http://openjudge.cn/" title="首页" rel="home">OpenJudge</a></h1>
    <ul id="userToolbar">
            <li><a class="link" href="/auth/login/">登入</a></li>
      <li><a class="link" href="/register/">注册</a></li>
          </ul>
    <div class="practice-search">
		 <form class="search-form" action="/search/" method="get">
	        <input name="q" type="text" value="题目ID, 标题, 描述" onclick="this.select()">
	        <button type="submit"></button>
	     </form>	
	</div>
    <div style="clear:both;"></div>
  </div>
</div>
	
	<div id="header">
  <div class="wrapper">
  	<div id="groupSmallLog">
  		<a href="http://qwsfsx.openjudge.cn/"><img class="group-logo" src="http://media.openjudge.cn/groups/130/logo_small.jpg" alt="趣味算法实习" width="50" height="50" /></a>    </div>
	<div class="contest-title-tab">
		 <h2><a href="http://qwsfsx.openjudge.cn/" title="首页" rel="home">趣味算法实习</a></h2>
		 <span>/</span>
		 <h2>Level 5</h2>
			</div>
    <ul id="mainNav">
        <li  class="current"><a href="/level5/" class="first">题目</a></li>
            <li ><a href="/level5/ranking/">排名</a></li>
                    <li ><a href="/level5/status/">状态</a></li>
	    			        <li class="last"><a href="/level5/clarify/" class="last">提问</a></li>
        </ul>	 
    <div style="clear:both;"></div>
  </div>
</div>	
	<div id="pagebody">
		<div class="wrapper">
			<script type="text/javascript">
$(function(e){
  var b={1:"很水",2:"简单",3:"普通",4:"较难",5:"变态"},
      g=$("#rate"),
      c=$("#stars img"),
      d=function(f){
        var h=0||g.val();
        c.each(function(k){
          var i=this.src.replace(/\w*\.gif$/,((k<f)?"sth":((k<h)?"st":"nst"))+".gif");
          this.src=i;
        });
        if(f)
          $("#rate_description").text(b[f]);
        else
          $("#rate_description").text(h!=0?b[h]:"");
      };
      c.hover(function(){d(this.id.charAt(4));},function(){d();});
      if(g.attr("value")){
        c.click(function(){
          var f=this.id.charAt(4);
          g.val(f);
          d(f);
          //$('#form_diffculity_rating').submit();
          $( "#dialog-form" ).dialog( "open" );
			g();
        });
      }
      d();
  });
$(document).ready(
		function(){
			$('#problem-tags').hide();
			$('#tag-display').toggle(function() {
											$('#problem-tags').show();
											this.value = '隐藏标签';
										}, function(){
											$('#problem-tags').hide();
											this.value = '显示标签';
										}
									);
			});
</script>

<div id="pageTitle"><h2>1479:MBone</h2></div>
<div id="topMenu">
	<ul>
		<li class="current-show"><a href="/level5/1479/">查看</a></li>
		<li ><a href="/level5/1479/submit/">提交</a></li>
				<li ><a href="/level5/1479/statistics/">统计</a></li>
			
		<li ><a href="/level5/clarify/1479/">提问</a></li>
			
	</ul>
</div><div class="problem-page col-9">
	<dl class="problem-params">
		<dt>总时间限制: </dt>
		<dd>1000ms</dd>
			<dt>内存限制: </dt>
		<dd>65536kB</dd>
	</dl>
	<dl class="problem-content">
		<dt>描述</dt>
		<dd>MBone is an abbreviation for `Multicast Backbone'. It is the realization of a virtual network built on top of the Internet protocol. In contrast to connection-oriented transmission of data (unicast) and the transmission from a sender to all destinations in a network (broadcast) it provides the multicast facility, a facility to send data to all hosts that have joined a so-called `multicast group'. All members of a group are able to send data to and receive data from the group. <br />Your program is to simulate a simplified version of the MBone. In our setting MBone is a combination of multicast routers and hosts, each host belonging to one of the routers. A router and the hosts that belong to it are called an island. Routers are connected via tunnels which are simple communication channels: data packets sent from one side through the tunnel are received on the other side. <br /><br />In order to become a member of a multicast group, a host must send a protocol message to its corresponding multicast router specifying the address of the group it wants to join. As a consequence the host will receive all data packets sent to this group. <br /><br />In order to send a data packet to a multicast group, a host sends the packet to the multicast router within its island. Every multicast router duplicates all received packets and sends them through each of its outgoing tunnels. After that it sends copies of the packet to all hosts on its island that have joined the group specified in the packet. <br /><br />The distribution range of a packet within MBone is restricted through an integer value called TTL (Time To Live) which is assigned to every packet. If a packet is sent through a tunnel its TTL is decremented by the threshold (an integer value) specified for each tunnel. A packet will not be sent over a tunnel if the TTL of the packet is lower than the threshold of the tunnel. <br /><center><img src=http://media.openjudge.cn/images/g481/1479_1.jpg></center></dd>
				
				
				<dt>输入</dt>
		<dd>The input to your program will consist of several descriptions of MBone networks. The first part of each description defines the network topology, and the second part describes the activities on this network. The first part starts with a line containing a single integer m (1 < m < 10), the number of islands in the network. A value of m = 0 indicates the end of input. The following lines contain the descriptions for the m islands. <br /><br />Each island description starts with a line containing the name of the multicast router (given as a string of at most 20 non-blank characters) followed by an integer for the number of remaining lines in the island description. These lines can be of two kinds:<br /><br />Host belonging to island: H < Host Address > <br /><br />Tunnel: T < Threshold > < Dest. Name > <br /><br />< Host Address > and < Threshold > are positive integer values specifying the address of the host and the threshold of the tunnel, respectively. < Dest: Name > is the name of the destination router at the other end of the tunnel, which is always different from the current router. <br /><br />The first line of the second part contains a single integer of at most 1000 indicating the number of lines in the following activity description. Each one of these lines describes the activity of a host: join a group, leave a group or send a packet to a group. <br /><br />Join a group: J < Host Address > < Group Address > <br /><br />Leave a group: L < Host Address > < Group Address > <br /><br />Send a packet to a group: S < Host Address > < Group Address > < Packet ID > < TTL > <br /><br />The < Group Address >, < Packet ID > and < TTL > are positive integer values with the obvious meaning. All names used for the routers and all host addresses used in a scenario, as well as all packet IDs are unique. TTLs of packets will be at most 1000. There will be at most 50 hosts and 100 tunnels in the network and at most 20 active groups (i.e, groups for which there is at least one member host) at any time. No host will try to leave a group that it is not in, nor try to join a group it is in.</dd>
		<dt>输出</dt>
		<dd>In the output you have to print the packets received by the hosts in the network for each scenario. If hosts receive multiple copies of a packet (routed via different paths), they keep only the copy with the highest TTL (reaching them via the 'shortest' path). <br /><br />For each network description, first output the number of the network, as shown in the sample output. Each one of the subsequent lines is of the format < Host Address > < Packet ID > < TTL >, meaning that host < Host Address > received the packet having the ID < Packet ID > with the remaining TTL < TTL >. The three entries of the line should be separated by single blank characters. The output must be sorted in ascending order: first by the host address and second by the packet ID. <br /><br />Output a blank line after each test case.</dd>
		<dt>样例输入</dt>
		<dd><pre>3
Nuremberg 3
T 8 Munich
H 3768
H 3669
Munich 6
H 721
H 722
H 723
T 6 Nuremberg
H 857
T 9 Ulm
Ulm 5
H 51225
H 51226
H 51227
T 15 Nuremberg
T 9 Munich
14
J 51227 26
J 3768 27
J 723 26
J 3768 26
S 3768 26 1000 17
J 857 26
S 3768 26 320 16
J 722 26
L 857 26
S 51227 26 1001 37
S 723 26 533 5
L 51227 26
L 3768 27
L 723 26
0
</pre></dd>
		<dt>样例输出</dt>
		<dd><pre>Network #1
722 533 5
722 1001 28
723 320 8
723 533 5
723 1000 9
723 1001 28
857 320 8
3768 320 16
3768 1000 17
3768 1001 22
51227 1000 0
51227 1001 37
</pre></dd>
						<dt>来源</dt>
		<dd>Southwestern European Regional Contest 1997</dd>
				</dl>
	<ul class="bottomMenu">
		<li class="current-show"><a href="/level5/1479/">查看</a></li>
		<li ><a href="/level5/1479/submit/">提交</a></li>
				<li ><a href="/level5/1479/statistics/">统计</a></li>
			
		<li ><a href="/level5/clarify/1479/">提问</a></li>
			</ul>
</div>

<div class="problem-statistics col-3">
       		<dl>
		<dt>全局题号</dt>
		<dd>481</dd>
					<dt>添加于</dt>
			<dd>2012-05-01</dd>
				<dt>提交次数</dt>
		<dd>0</dd>
		<dt>尝试人数</dt>
	    <dd>0</dd>
	    <dt>通过人数</dt>
	    <dd>0</dd>
	</dl>
		
		
					
	<script type="text/javascript">

$(function(){
    var e={},c={};//e为选中的标签
    var b=function(h){
        if(e[h]){
            c[h]=true;
            $.each(e[h],function(k,j){
                $(j).removeClass("gract").addClass("rdact")
                })
        }
    };//打标签css
    var d=function(h){
        if(e[h]){
            delete c[h];
            $.each(e[h],function(k,j){
                $(j).removeClass("rdact").addClass("gract")
                })
        }
    };//取消打上的标签css

    var g=function(){
        var h=$.trim($("#tags_title").attr("value").toLowerCase()).split(" "),i={};
        $.each(h,function(k,j){
            if(j!=""){
                b(j);
                i[j]=true
            }
        });
        for(t in c){
            if(!i[t]){
                d(t);
            }
        }
    };

    $('.tagbtn').each(function(j){
        var h=$(this).text().toLowerCase();
        if(e[h]){
            e[h].push(this);
        }
        else{
            e[h]=[this];
        }
    }).click(function(){
        var h=$(this).text();
        var k=$.trim($("#tags_title").attr("value")).split(" "),o=false,j=h.toLowerCase(),l;
        k=$.grep(k,function(value){
            if(value.toLowerCase()==j){
                d(j);
                o=true;
                return false;
            }
            else{
                return true;
            }
        });//遍历k检查k中是否存在所点击的标签如果有则去除
        if(!o){
            k.push(h);
            b(j);
        }//如果不存在则添加到最后
        var n=k.join(" ");//用空格连接数组中的标签
        $("#tags_title").attr("value",(n.length>1)?$.trim(n)+" ":n);
        $("#tags_title").focus(); //如果数量多于1个标签
    });
    $("#tags_title").keyup(g);

	// a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
	$( "#dialog:ui-dialog" ).dialog( "destroy" );
	
	$( "#dialog-form" ).dialog({
		autoOpen: false,
		height: 420,
		width: 550,
		modal: true,
		buttons: {
			"保存": function() {
				$('#rating_form').submit();
			},
			"取消": function() {
				$( this ).dialog( "close" );
			}
		},
		close: function() {
		}
	});

	$( "#create-rating" )
		.button()
		.click(function() {
			$( "#dialog-form" ).dialog( "open" );
			g();
		});
	
	 var x={1:"很水",2:"简单",3:"普通",4:"较难",5:"变态"},
     i=$("#rate"),
     y=$("#stars img"),
     z=function(f){
       var h=0||i.val();
       y.each(function(k){
         var i=this.src.replace(/\w*\.gif$/,((k<f)?"sth":((k<h)?"st":"nst"))+".gif");
         this.src=i;
       });
       if(f)
         $("#rate_description").text(x[f]);
       else
         $("#rate_description").text(h!=0?x[h]:"");
     };
     y.hover(function(){d(this.id.charAt(4));},function(){z();});
     if(i.attr("value")){
       y.click(function(){
         var f=this.id.charAt(4);
         i.val(f);
         z(f);
         //$('#form_diffculity_rating').submit();
         //$( "#dialog-form" ).dialog( "open" );
		//	g();
       });
     }
     z();
});
</script>

<div id="dialog-form" title="评价">
	<form id="rating_form" class="j a_interest_form" method="POST" action="/api/problem/rating" onsubmit="$(this).ajaxSubmit({dataType:'json',success:function(){$('#dialog-form').dialog( 'close' );}});return false;">
       			<input type="hidden" value="2532" name="app_id">
   				<input type="hidden" value="1479" name="problem_number">
   				<input type="hidden" value="481" name="problem_id">
       		<div class="rating">
	  您的评价
   		<span style="margin-left: 10px;" id="stars">
			<img alt="很水" src="http://static.openjudge.cn/images/nst.gif" id="star1">
			<img alt="简单" src="http://static.openjudge.cn/images/nst.gif" id="star2">
			<img alt="一般" src="http://static.openjudge.cn/images/nst.gif" id="star3">
			<img alt="较难" src="http://static.openjudge.cn/images/nst.gif" id="star4">
			<img alt="变态" src="http://static.openjudge.cn/images/nst.gif" id="star5">
		</span>
		<span class="pl" id="rate_description"></span>
   		
	    	<input type="hidden" value="" name="diffculity_rate" id="rate">         
		
    </div>
   				<ul class="interest_form " id="advtags">
    
        			<li>标签(多个标签用空格分隔): </li>
      				<li><input type="text" style="width: 250px;" name="tags" id="tags_title" value=""></li>
       				       				       				<li class="clearfix" id="populartags">
       					<dl>
       						<dt>常用标签:</dt>
       						<dd>
       						       							<span class="tagbtn gract">递归</span> &nbsp;
       						       							<span class="tagbtn gract">动态规划</span> &nbsp;
       						       							<span class="tagbtn gract">贪心</span> &nbsp;
       						       							<span class="tagbtn gract">搜索</span> &nbsp;
       						       							<span class="tagbtn gract">枚举</span> &nbsp;
       						       							<span class="tagbtn gract">模拟</span> &nbsp;
       						       							<span class="tagbtn gract">数学</span> &nbsp;
       						       							<span class="tagbtn gract">字符串处理</span> &nbsp;
       						       							<span class="tagbtn gract">几何</span> &nbsp;
       						       							<span class="tagbtn gract">高精度计算</span> &nbsp;
       						       							<span class="tagbtn gract">图论</span> &nbsp;
       						       						</dd>
       					</dl>
       				</li>
   				</ul>
	</form>
</div>
	
	<div>
						<h4>尚无评分</h4>
			</div>
	
		
				
						
	</div>
		</div>
	</div>
	<div id="footer">
	<div class="wrapper">
		<ul class="oj-info">
			<li>&copy;2002-2013 POJ 沪ICP备12005590号-3</li>
		</ul>
		<ul class="debug-info">
									<li>
				<a style="color:red" href="javascript:void(0);" onclick="api.switchLanguage('en_US');">English</a></li>
						<li><a href="http://openjudge.cn/help.html" rel="nofollow">帮助</a></li>
			<li><a href="http://openjudge.cn/about.html" rel="nofollow">关于</a></li>
		</ul>
		<div style="clear:both;"></div>
	</div>
</div>

	
	</body>
</html>
